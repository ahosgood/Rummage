/**
 * Rummage 2.9.0 | Andrew Hosgood - 23/10/2015
 */
!function(e){"function"==typeof define&&define.amd?define("rummage",["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")(window)):e(jQuery)}(function(e){e.fn.rummage=function(a,t){var s=e.extend({},e.fn.rummage.objDefaultOptions,t),r=function(e,a){return s.matchCase===!0?-1!==a.indexOf(e):-1!==a.toLowerCase().indexOf(e.toLowerCase())},l=function(e){return""==e.replace(/[\s\t\r\n]*/g,"")};return this.each(function(){var t=e(this),n=t[0].nodeName.toLowerCase();if("input"!==n&&"select"!==n)throw"Rummaging can only be called on INPUT and SELECT elements";var c;if(!("object"==typeof a&&(e(a)instanceof jQuery||a.jquery)||e(a).length))throw"Can't find anything to rummage";a=e(a),c=a.find("["+s.attribute+"]");var o=c.filter(":not("+s.exclude+")").length,u=function(){var u=t.val(),h=0,i=c.filter(":not("+s.exclude+")");if(l(u))h=i.filter(":not("+s.exclude+")").length,i.addClass(s.matchClass).removeClass(s.noMatchClass),a.removeClass(s.searchingClass+" "+s.noResultsClass);else if(s.regex)try{var m=new RegExp(u,"m");a.hasClass(s.searchingClass)||a.addClass(s.searchingClass),i.each(function(){var a=e(this),t=a.attr(s.attribute),r=!1;(m.test(t)||s.searchText&&m.test(a.text()))&&(r=!0),r?(h++,l(s.matchClass)||a.addClass(s.matchClass),l(s.noMatchClass)||a.removeClass(s.noMatchClass)):(l(s.noMatchClass)||a.addClass(s.noMatchClass),l(s.matchClass)||a.removeClass(s.matchClass))})}catch(C){h=i.find("."+s.matchClass).length}else{var f=u.match(s.matchCase===!0?/[\+\-]?("([^"]*)"|'([^']*)')/g:/[\+\-]?("([^"]*)"|'([^']*)')/gi),d=s.matchCase===!0?u.replace(/[\+\-]?("[^"]*"|'[^']*')/g,""):u.replace(/[\+\-]?("[^"]*"|'[^']*')/gi,""),g=f?d.split(" ").concat(f):d.split(" ");a.hasClass(s.searchingClass)||a.addClass(s.searchingClass),i.each(function(){var a=e(this),t=a.attr(s.attribute),c=0;if("select"===n)c=s.searchText?u===a.text()?1:0:u===a.attr(s.attribute)?1:0;else{s.searchText&&(t=""===t?a.text():t+","+a.text());for(var o=0,i=g.length;i>o;o++){var m=g[o];if(""!==m){if(m.length>1&&"+"===m.substr(0,1)&&!r(m.substr(1).replace(/^"/,"").replace(/"$/,""),t)){c=0;break}if(m.length>1&&"-"===m.substr(0,1)&&r(m.substr(1).replace(/^"/,"").replace(/"$/,""),t)){c=0;break}for(m=m.replace(/^"/,"").replace(/"$/,"");r(m,t);){var C=t.indexOf(m);if(t=t.substring(0,C)+t.substr(C+m.length),c++,!s.score)break}}}}c>0?(h++,l(s.matchClass)||a.addClass(s.matchClass),l(s.noMatchClass)||a.removeClass(s.noMatchClass)):(l(s.noMatchClass)||a.addClass(s.noMatchClass),l(s.matchClass)||a.removeClass(s.matchClass)),s.score&&a.attr("data-rummagescore",c)})}0===h?a.addClass(s.noResultsClass):a.removeClass(s.noResultsClass),("object"==typeof s.results&&(e(s.results)instanceof jQuery||s.results.jquery)||e(s.results).length)&&e(s.results).text(h),("object"==typeof s.total&&(e(s.total)instanceof jQuery||s.total.jquery)||e(s.total).length)&&i.length!==o&&(o=i.length,e(s.total).text(o))};switch(s.searchOnLoad&&u(),n){case"input":t.off("keyup search").on("keyup search",u);break;case"select":t.off("click").on("click",u)}t.on({"rummage.reindex":u}),("object"==typeof s.total&&(e(s.total)instanceof jQuery||s.total.jquery)||e(s.total).length)&&e(s.total).text(o)})},e.fn.rummage.objDefaultOptions={attribute:"data-rummage",exclude:".rummage-exclude",matchCase:!1,matchClass:"",noMatchClass:"rummage-nomatch",noResultsClass:"rummage-noresults",regex:!1,results:"",score:!1,searchingClass:"rummage-searching",searchOnLoad:!0,searchText:!1,total:""}});