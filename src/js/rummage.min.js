/**
 * Rummage 2.8.1 | Andrew Hosgood - 08/11/2014
 */
(function(e){try{if(window.jQuery){e.fn.rummage=function(t,n){var r=e.extend({},e.fn.rummage.objDefaultOptions,n),i=function(e,t){if(r.matchCase===true){return t.indexOf(e)!==-1}else{return t.toLowerCase().indexOf(e.toLowerCase())!==-1}},s=function(e){return e.replace(/[\s\t\r\n]*/g,"")==""};return this.each(function(){var n=e(this),o=n[0].nodeName.toLowerCase();if(o==="input"||o==="select"){var u;if(typeof t==="object"&&(e(t)instanceof jQuery||t.jquery)||e(t).length){t=e(t);u=t.find("["+r.attribute+"]")}else{throw"Can't find anything to rummage"}var a=u.filter(":not("+r.exclude+")").length,f=function(){var f=n.val(),l=0,c=u.filter(":not("+r.exclude+")");if(s(f)){l=c.filter(":not("+r.exclude+")").length;c.addClass(r.matchClass).removeClass(r.noMatchClass),t.removeClass(r.searchingClass+" "+r.noResultsClass)}else if(r.regex){try{var h=new RegExp(f,"m");if(!t.hasClass(r.searchingClass)){t.addClass(r.searchingClass)}c.each(function(){var t=e(this),n=t.attr(r.attribute),i=false;if(h.test(n)||r.searchText&&h.test(t.text())){i=true}if(i){l++;if(!s(r.matchClass)){t.addClass(r.matchClass)}if(!s(r.noMatchClass)){t.removeClass(r.noMatchClass)}}else{if(!s(r.noMatchClass)){t.addClass(r.noMatchClass)}if(!s(r.matchClass)){t.removeClass(r.matchClass)}}})}catch(p){l=c.find("."+r.matchClass).length}}else{var d=r.matchCase===true?f.match(/[\+\-]?("([^"]*)"|'([^']*)')/g):f.match(/[\+\-]?("([^"]*)"|'([^']*)')/gi),v=r.matchCase===true?f.replace(/[\+\-]?("[^"]*"|'[^']*')/g,""):f.replace(/[\+\-]?("[^"]*"|'[^']*')/gi,""),m=d?v.split(" ").concat(d):v.split(" ");if(!t.hasClass(r.searchingClass)){t.addClass(r.searchingClass)}c.each(function(){var t=e(this),n=t.attr(r.attribute),u=0;if(o==="select"){if(r.searchText){u=f===t.text()?1:0}else{u=f===t.attr(r.attribute)?1:0}}else{if(r.searchText){n=n===""?t.text():n+","+t.text()}for(var a=0,c=m.length;a<c;a++){var h=m[a];if(h!==""){if(h.length>1&&h.substr(0,1)==="+"&&!i(h.substr(1).replace(/^"/,"").replace(/"$/,""),n)){u=0;break}else if(h.length>1&&h.substr(0,1)==="-"&&i(h.substr(1).replace(/^"/,"").replace(/"$/,""),n)){u=0;break}else{h=h.replace(/^"/,"").replace(/"$/,"");while(i(h,n)){var p=n.indexOf(h);n=n.substring(0,p)+n.substr(p+h.length);u++;if(!r.score){break}}}}}}if(u>0){l++;if(!s(r.matchClass)){t.addClass(r.matchClass)}if(!s(r.noMatchClass)){t.removeClass(r.noMatchClass)}}else{if(!s(r.noMatchClass)){t.addClass(r.noMatchClass)}if(!s(r.matchClass)){t.removeClass(r.matchClass)}}if(r.score){t.attr("data-rummagescore",u)}})}if(l===0){t.addClass(r.noResultsClass)}else{t.removeClass(r.noResultsClass)}if(typeof r.results==="object"&&(e(r.results)instanceof jQuery||r.results.jquery)||e(r.results).length){e(r.results).text(l)}if((typeof r.total==="object"&&(e(r.total)instanceof jQuery||r.total.jquery)||e(r.total).length)&&c.length!==a){a=c.length;e(r.total).text(a)}};if(r.searchOnLoad){f()}switch(o){case"input":n.off("keyup search").on("keyup search",f);break;case"select":n.off("click").on("click",f);break}n.on({"rummage.reindex":f});if(typeof r.total==="object"&&(e(r.total)instanceof jQuery||r.total.jquery)||e(r.total).length){e(r.total).text(a)}}else{throw"Rummaging can only be called on INPUT and SELECT elements"}})},e.fn.rummage.objDefaultOptions={attribute:"data-rummage",exclude:".rummage-exclude",matchCase:false,matchClass:"",noMatchClass:"rummage-nomatch",noResultsClass:"rummage-noresults",regex:false,results:"",score:false,searchingClass:"rummage-searching",searchOnLoad:true,searchText:false,total:""}}else{throw"Rummage requires jQuery to run"}}catch(t){if(window.console){if(window.console.error){console.error(t)}else if(window.console.log){console.log(t)}}}})(jQuery)