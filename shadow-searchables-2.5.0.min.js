/**
 * Shadow Searchables 2.5.0 | Andrew Hosgood - 30/09/2013
 */
(function(e){try{if(window.jQuery){e.fn.searchables=function(t,n){var r=e.extend({},e.fn.searchables.objDefaultOptions,n),i=function(e,t){return t.indexOf(e)!==-1},s=function(e){return e.replace(/[\s\t\r\n]*/g,"")==""};return this.each(function(){var n=e(this);var o=n[0].nodeName.toLowerCase();if(o==="input"||o==="select"){var u;if(typeof t==="object"&&(e(t)instanceof jQuery||t.jquery)||e(t).length){t=e(t);u=t.find("["+r.attribute+"]:not(."+r.excludeClass+")")}else{throw"Can't find any searchables"}var a=function(){var a=n.val(),f=0;if(s(a)){f=u.filter(":not(."+r.excludeClass+")").length;u.addClass(r.matchClass).removeClass(r.noMatchClass),t.removeClass(r.searchingClass+" "+r.noResultsClass)}else if(r.regex){try{var l=new RegExp(a,"m");if(!t.hasClass(r.searchingClass)){t.addClass(r.searchingClass)}u.each(function(){var t=e(this);var n=t.attr(r.attribute).toLowerCase();var i=false;if(l.test(n)||r.searchText&&l.test(t.text())){i=true}if(i){f++;if(!s(r.matchClass)){t.addClass(r.matchClass)}if(!s(r.noMatchClass)){t.removeClass(r.noMatchClass)}}else{if(!s(r.noMatchClass)){t.addClass(r.noMatchClass)}if(!s(r.matchClass)){t.removeClass(r.matchClass)}}})}catch(c){f=u.find("."+r.matchClass).length}}else{var h=a.toLowerCase().match(/[\+\-]?("([^"]*)"|'([^']*)')/g),p=a.toLowerCase().replace(/[\+\-]?("[^"]*"|'[^']*')/g,""),d=h?p.split(" ").concat(h):p.split(" ");if(!t.hasClass(r.searchingClass)){t.addClass(r.searchingClass)}u.each(function(){var t=e(this);var n=t.attr(r.attribute).toLowerCase();var u=0;if(o==="select"){if(r.searchText){u=a.toLowerCase()===t.text().toLowerCase()?1:0}else{u=a.toLowerCase()===t.attr(r.attribute).toLowerCase()?1:0}}else{if(r.searchText){n+=","+t.text()}for(var l=0,c=d.length;l<c;l++){var h=d[l];if(h!==""){if(h.length>1&&h.substr(0,1)==="+"&&!i(h.substr(1).replace(/^"/,"").replace(/"$/,""),n)){u=0;break}else if(h.length>1&&h.substr(0,1)==="-"&&i(h.substr(1).replace(/^"/,"").replace(/"$/,""),n)){u=0;break}else{h=h.replace(/^"/,"").replace(/"$/,"");while(i(h,n)){var p=n.indexOf(h);n=n.substring(0,p)+n.substr(p+h.length);u++;if(!r.score){break}}}}}}if(u>0){f++;if(!s(r.matchClass)){t.addClass(r.matchClass)}if(!s(r.noMatchClass)){t.removeClass(r.noMatchClass)}}else{if(!s(r.noMatchClass)){t.addClass(r.noMatchClass)}if(!s(r.matchClass)){t.removeClass(r.matchClass)}}if(r.score){t.attr("data-searchablesscore",u)}})}if(f===0){t.addClass(r.noResultsClass)}else{t.removeClass(r.noResultsClass)}if(typeof r.results==="object"&&(e(r.results)instanceof jQuery||r.results.jquery)||e(r.results).length){e(r.results).text(f)}};if(r.searchOnLoad){a()}switch(o){case"input":n.off("keyup search").on("keyup search",a);break;case"select":n.off("click").on("click",a);break}if(typeof r.total==="object"&&(e(r.total)instanceof jQuery||r.total.jquery)||e(r.total).length){e(r.total).text(u.filter(":not(."+r.excludeClass+")").length)}}else{throw"Searchables can only be called on INPUT and SELECT elements"}})},e.fn.searchables.objDefaultOptions={attribute:"data-searchables",excludeClass:"searchables-exclude",matchClass:"",noMatchClass:"searchables-nomatch",noResultsClass:"searchables-noresults",regex:false,results:"",score:false,searchingClass:"searchables-searching",searchOnLoad:true,searchText:false,total:""}}else{throw"Shadow Searchables requires jQuery to run"}}catch(t){if(window.console){if(window.console.error){console.error(t)}else if(window.console.log){console.log(t)}}}})(jQuery)